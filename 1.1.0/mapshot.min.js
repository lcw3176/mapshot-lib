"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var LatLng=function(){function i(t,e){_classCallCheck(this,i),this.x,this.y,null!=t&&null!=e&&this.init(t,e)}return _createClass(i,[{key:"init",value:function(t,e){e<t?(this.x=t,this.y=e):(this.x=e,this.y=t)}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}}]),i}(),Tile=function(){function t(){_classCallCheck(this,t),this.width,this.noLogoHeight,this.withLogoHeight,this.noLogoValue,this.withLogoValue,this.correctFix,this.total=0,this.complete=0,this.tileImageLoadStartEvent=new CustomEvent("tileImageLoadStart",{total:this.total}),this.tileImageOnLoadEvent=new CustomEvent("tileImageOnLoad",{complete:this.complete}),this.tileImageOnErrorEvent=new CustomEvent("tileImageOnError",{complete:this.complete})}return _createClass(t,[{key:"generate",value:function(t){var e=37.5668;this.noLogoHeight=this.noLogoValue+(e-t.getY())*this.correctFix,this.withLogoHeight=this.withLogoValue+(e-t.getY())*this.correctFix}},{key:"setLevel",value:function(t){if(t==mapshot.Radius.One.zoom||t==mapshot.Radius.Two.zoom)this.correctFix=2833e-8,this.width=.00268,this.noLogoValue=.00207,this.withLogoValue=.00204;else{if(t!=mapshot.Radius.Five.zoom&&t!=mapshot.Radius.Ten.zoom)throw"Parameter is not mapshot.Radius Type";this.correctFix=11633e-8,this.width=.01072,this.noLogoValue=.00829,this.withLogoValue=.00817}}},{key:"getWidthBetweenBlock",value:function(){return this.width}},{key:"getHeightBetweenBlockNoLogo",value:function(){return this.noLogoHeight}},{key:"getHeightBetweenBlockWithLogo",value:function(){return this.withLogoHeight}},{key:"getSE",value:function(t,e){this.generate(e);var i=e.getY()-this.noLogoHeight*parseInt(t.sideBlockCount/2)-this.noLogoHeight/2,t=e.getX()+this.width*parseInt(t.sideBlockCount/2)+this.width/2;return new mapshot.coors.LatLng(i,t)}},{key:"getSW",value:function(t,e){this.generate(e);var i=e.getY()-this.noLogoHeight*parseInt(t.sideBlockCount/2)-this.noLogoHeight/2,t=e.getX()-this.width*parseInt(t.sideBlockCount/2)-this.width/2;return new mapshot.coors.LatLng(i,t)}},{key:"getNE",value:function(t,e){this.generate(e);var i=e.getY()+this.noLogoHeight*parseInt(t.sideBlockCount/2)+this.noLogoHeight/2,t=e.getX()+this.width*parseInt(t.sideBlockCount/2)+this.width/2;return new mapshot.coors.LatLng(i,t)}},{key:"getNW",value:function(t,e){this.generate(e);var i=e.getY()+this.noLogoHeight*parseInt(t.sideBlockCount/2)+this.noLogoHeight/2,t=e.getX()-this.width*parseInt(t.sideBlockCount/2)-this.width/2;return new mapshot.coors.LatLng(i,t)}},{key:"draw",value:function(t,e,i,o){var n=e.sideBlockCount,s=document.createElement("canvas"),h=n<=11?1e3:500;s.width=n*h,s.height=973*n;var a=s.getContext("2d"),t=this.getNW(n,t),r=new mapshot.coors.LatLng(t.getX()+this.getWidthBetweenBlock()/2,t.getY()-this.getHeightBetweenBlockNoLogo()/2),g=r.getX(),l=0,c=!1;this.total=n*n,this.complete=0,document.body.dispatchEvent(this.tileImageLoadStartEvent);for(var u=0;u<n;u++){for(var v=0;v<n;v++){u+1===n&&0===v&&(i.setHeight(973),r.init(r.getX(),r.getY()+this.getHeightBetweenBlockNoLogo()),r.init(r.getX(),r.getY()-this.getHeightBetweenBlockWithLogo()),c=!0),i.setCenter(r);var d=new Image;d.crossOrigin="*",d.src=i.getUrl(),function(t){var e=l%n*h,i=parseInt(l/n)*h;t.onload=function(){a.drawImage(t,0,0,t.width,973,e,i,h,h),this.complete++,document.body.dispatchEvent(this.tileImageLoadEvent),this.complete==this.total&&o(s)},t.onerror=function(){this.complete++,document.body.dispatchEvent(this.tileImageErrorEvent),this.complete==this.total&&o(s)}}(d),l++,r.init(r.getX()+this.getHeightBetweenBlockNoLogo(),r.getY()),c&&(i.setHeight(1e3),r.init(r.getX(),r.getY()+this.getHeightBetweenBlockWithLogo()),r.init(r.getX(),r.getY()-this.getHeightBetweenBlockNoLogo()),c=!1)}r.init(g,r.getY()-this.getHeightBetweenBlockNoLogo())}}}]),t}(),Naver=function(){function t(){_classCallCheck(this,t),this.mapType,this.center,this.level,this.key,this.height}return _createClass(t,[{key:"setMapType",value:function(t){this.mapType=t}},{key:"setCenter",value:function(t){this.center=t}},{key:"setLevel",value:function(t){this.level=t.zoom}},{key:"setKey",value:function(t){this.key=t}},{key:"setHeight",value:function(t){this.height=t}},{key:"getUrl",value:function(){return"https://naveropenapi.apigw.ntruss.com/map-static/v2/raster-cors?w=1000&h="+this.height+NaN+this.center.getX()+","+this.center.getY()+"&level="+this.level+"&X-NCP-APIGW-API-KEY-ID="+this.key+"&maptype="+this.mapType}}]),t}(),mapshot={maps:{Tile:Tile},coors:{LatLng:LatLng},profile:{Naver:Naver},radius:{One:{sideBlockCount:11,zoom:18},Two:{sideBlockCount:17,zoom:18},Five:{sideBlockCount:11,zoom:16},Ten:{sideBlockCount:21,zoom:16}}};