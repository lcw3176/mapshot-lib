(()=>{var e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n=function(){function n(e,o){t(this,n),this.x,this.y,null!=e&&null!=o&&this.init(e,o)}return e(n,[{key:"init",value:function(e,t){e>t?(this.x=e,this.y=t):(this.x=t,this.y=e)}},{key:"getX",value:function(){return this.x}},{key:"getY",value:function(){return this.y}}]),n}();!function(){if("function"==typeof window.CustomEvent)return!1;function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),n}e.prototype=window.Event.prototype,window.CustomEvent=e}();var o={maps:{NaverTile:r,KakaoTile:i},coors:{LatLng:n},profile:{Naver:s,Kakao:a},radius:{One:{sideBlockCount:11,zoom:18},Two:{sideBlockCount:17,zoom:18},Five:{sideBlockCount:11,zoom:16},Ten:{sideBlockCount:21,zoom:16}}};function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var i=function(){function n(){t(this,n)}return e(n,[{key:"wakeUp",value:function(e,t){var n=new CustomEvent("kakaoTileOnError"),o=new XMLHttpRequest;o.onreadystatechange=function(){o.readyState===o.DONE&&(200===o.status||201===o.status?t():document.body.dispatchEvent(n))},o.open("GET",e),o.send()}},{key:"drawGet",value:function(e,t){var n=new CustomEvent("kakaoTileOnProgress",{detail:{percentage:0}}),o=new CustomEvent("kakaoTileOnError"),i=new XMLHttpRequest;i.open("GET",e.getUrlWithParams(),!0),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.responseType="arraybuffer",i.onload=function(e){var n=new Blob([this.response]);t(n)},i.onprogress=function(e){n.detail.percentage=parseInt(e.loaded/e.total*100),document.body.dispatchEvent(n)},i.onerror=function(){document.body.dispatchEvent(o)},i.send()}},{key:"drawPost",value:function(e,t){var n=new CustomEvent("kakaoTileOnProgress",{detail:{percentage:0}}),o=new CustomEvent("kakaoTileOnError"),i=new XMLHttpRequest;i.open("POST",e.getProxyUrl(),!0),i.setRequestHeader("Content-Type","application/json"),i.setRequestHeader("Access-Control-Allow-Origin","*"),i.responseType="arraybuffer",i.onload=function(e){var n=new Blob([this.response]);t(n)},i.onprogress=function(e){n.detail.percentage=parseInt(e.loaded/e.total*100),document.body.dispatchEvent(n)},i.onerror=function(){document.body.dispatchEvent(o)},i.send(e.getParamsToJson())}},{key:"wait",value:function(e,t,n,o,i){var r=new XMLHttpRequest;r.onreadystatechange=function(){r.readyState==XMLHttpRequest.DONE&&(r.responseText==t?i():(o(),setTimeout((function(){r.open("GET",e,!0),r.send(null)}),n)))},r.open("GET",e,!0),r.send(null)}}]),n}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var r=function(){function n(){t(this,n),this.width,this.noLogoHeight,this.withLogoHeight,this.noLogoValue,this.withLogoValue,this.correctFix}return e(n,[{key:"generate",value:function(e){var t=37.5668;this.noLogoHeight=this.noLogoValue+(t-e.getY())*this.correctFix,this.withLogoHeight=this.withLogoValue+(t-e.getY())*this.correctFix}},{key:"setLevel",value:function(e){if(e.zoom==o.radius.One.zoom||e.zoom==o.radius.Two.zoom)this.correctFix=2833e-8,this.width=.00268,this.noLogoValue=.00207,this.withLogoValue=.00204;else{if(e.zoom!=o.radius.Five.zoom&&e.zoom!=o.radius.Ten.zoom)throw"Parameter is not mapshot.radius Type";this.correctFix=11633e-8,this.width=.01072,this.noLogoValue=.00829,this.withLogoValue=.00817}}},{key:"getWidthBetweenBlock",value:function(){return this.width}},{key:"getHeightBetweenBlockNoLogo",value:function(){return this.noLogoHeight}},{key:"getHeightBetweenBlockWithLogo",value:function(){return this.withLogoHeight}},{key:"getSE",value:function(e,t){this.setLevel(e),this.generate(t);var n=t.getY()-this.noLogoHeight*parseInt(e.sideBlockCount/2)-this.noLogoHeight/2,i=t.getX()+this.width*parseInt(e.sideBlockCount/2)+this.width/2;return new o.coors.LatLng(n,i)}},{key:"getSW",value:function(e,t){this.setLevel(e),this.generate(t);var n=t.getY()-this.noLogoHeight*parseInt(e.sideBlockCount/2)-this.noLogoHeight/2,i=t.getX()-this.width*parseInt(e.sideBlockCount/2)-this.width/2;return new o.coors.LatLng(n,i)}},{key:"getNE",value:function(e,t){this.setLevel(e),this.generate(t);var n=t.getY()+this.noLogoHeight*parseInt(e.sideBlockCount/2)+this.noLogoHeight/2,i=t.getX()+this.width*parseInt(e.sideBlockCount/2)+this.width/2;return new o.coors.LatLng(n,i)}},{key:"getNW",value:function(e,t){this.setLevel(e),this.generate(t);var n=t.getY()+this.noLogoHeight*parseInt(e.sideBlockCount/2)+this.noLogoHeight/2,i=t.getX()-this.width*parseInt(e.sideBlockCount/2)-this.width/2;return new o.coors.LatLng(n,i)}},{key:"draw",value:function(e,t,n,i){this.setLevel(t);var r=t.sideBlockCount,a=document.createElement("canvas"),s=r<=11?1e3:500;a.width=r*s,a.height=r*s;var u=a.getContext("2d"),l=this.getNW(t,e),c=new o.coors.LatLng(l.getX()+this.getWidthBetweenBlock()/2,l.getY()-this.getHeightBetweenBlockNoLogo()/2),h=c.getX(),g=0,v=!1,f=r*r,d=0;n.setHeight(1e3);var y=new CustomEvent("naverTileOnLoadStart",{detail:{total:f}}),p=new CustomEvent("naverTileOnProgress"),w=new CustomEvent("naverTileOnError");document.body.dispatchEvent(y);for(var k=0;k<r;k++){for(var m=0;m<r;m++){k+1===r&&0===m&&(n.setHeight(973),c.init(c.getX(),c.getY()+this.getHeightBetweenBlockNoLogo()),c.init(c.getX(),c.getY()-this.getHeightBetweenBlockWithLogo()),v=!0),n.setCenter(c);var L=new Image;L.crossOrigin="*",L.src=n.getUrl(),function(e,t){var n=e%r*s,o=parseInt(e/r)*s;t.onload=function(){u.drawImage(t,0,0,t.width,973,n,o,s,s),d++,document.body.dispatchEvent(p),d==f&&i(a)},t.onerror=function(){d++,document.body.dispatchEvent(w),d==f&&i(a)}}(g,L),g++,c.init(c.getX()+this.getWidthBetweenBlock(),c.getY()),v&&(n.setHeight(1e3),c.init(c.getX(),c.getY()+this.getHeightBetweenBlockWithLogo()),c.init(c.getX(),c.getY()-this.getHeightBetweenBlockNoLogo()),v=!1)}c.init(h,c.getY()-this.getHeightBetweenBlockNoLogo())}}}]),n}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var a=function(){function n(){t(this,n),this.center,this.level,this.mapType,this.proxyUrl,this.layerMode=!1}return e(n,[{key:"setLayerMode",value:function(e){this.layerMode=e}},{key:"isLayerMode",value:function(){return this.layerMode}},{key:"setLevel",value:function(e){this.level=e}},{key:"setMapType",value:function(e){this.mapType=e}},{key:"setCenter",value:function(e){this.center=e}},{key:"setProxyUrl",value:function(e){this.proxyUrl=e}},{key:"getProxyUrl",value:function(){return this.proxyUrl}},{key:"getUrlWithParams",value:function(){var e="?lat="+this.center.getY()+"&lng="+this.center.getX()+"&level="+this.level+"&type="+this.mapType;return this.proxyUrl+e}},{key:"getParamsToJson",value:function(){var e={layerMode:this.layerMode,lat:this.center.getY(),lng:this.center.getX(),level:this.level,type:this.mapType};return JSON.stringify(e)}}]),n}();function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}e=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var s=function(){function n(){t(this,n),this.mapType,this.center,this.level,this.key,this.height}return e(n,[{key:"setMapType",value:function(e){this.mapType=e}},{key:"setCenter",value:function(e){this.center=e}},{key:"setLevel",value:function(e){this.level=e.zoom}},{key:"setKey",value:function(e){this.key=e}},{key:"setHeight",value:function(e){this.height=e}},{key:"getUrl",value:function(){return"https://naveropenapi.apigw.ntruss.com/map-static/v2/raster-cors?w=1000&h="+this.height+"&center="+this.center.getX()+","+this.center.getY()+"&level="+this.level+"&X-NCP-APIGW-API-KEY-ID="+this.key+"&maptype="+this.mapType}}]),n}()})();